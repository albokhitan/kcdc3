{% extends "base.html" %}

{% block title %}Classes and Events{% endblock %}

{% block content %}

	<h1>Classes and Events</h1>

	<section>

		<p class="intro">Classes at KCDC are taught by volunteer teachers and all students are invited to attend for free. Locations vary to fit the subject matter of the class.</p>

		<p class="intro2">When you find a class that piques your interest, click on the title and register for the class. If you don&#8217;t think you&#8217;ll make it to a class, kindly un-register so someone on the waitlist can take your spot. Our class liaison will update students with information about the class as the date grows near.</p>

		<p class="intro2">We're opening registration one week at a time:</p>

		<ul>			
			<li>Registration for Week 1: Friday, August 24</li>
			<li>Registration for Week 2: Friday, August 31</li>
			<li>Registration for Week 3: Friday, September 7</li>
			<li>Registration for Week 4: Friday, September 14</li>
		</ul>

		<p class="intro2">Course evaluations help us improve KCDC. Please <a href="https://docs.google.com/spreadsheet/viewform?formkey=dEdzZ3pJT1FLd0MtSWlTcmRTRkphUlE6MQ">fill out a course evaluation</a> once you&#8217;ve taken the class.</p>

	</section>

	{% comment %} TODO: We should not be duplicating the markup and template tags, and we should be filtering in the view. {% endcomment %}

	<h2 id="upcoming">Upcoming classes</h2>

	<dl class="date-listing">

		{% for event in event_list %}

			{% if not event.has_passed and event.status == "PUBLISHED" %}

				{% ifchanged %}
					<dt>
						{{ event.date|date:"l" }}<br />
						<strong>{{ event.date|date:"j" }}</strong> {{ event.date|date:"F" }}
						{% if forloop.first %}
							{{ event.date|date:"Y" }}
						{% endif %}
					</dt>
				{% endifchanged %}
				<dd>
				<h3>
					<!--<b class="event">Event:</b>-->
					<a href="/classes/{{ event.slug }}">{{ event.title }} <span class="meta">({{ event.date|date:"P" }})</span></a>
				</h3>

				{{ event.summary|safe }}

				<p>Instructor: {% for bio in event.teacher_bios.all %}{% if not forloop.first %}, {% endif %}{{ bio.name }}{% endfor %}</p>

				{% if not event.has_passed and event.registration_status == "ALLOW" %}	
					{% if event.registration_count >= event.max_students %}
					 	{% if event.waitlist_status %}
							<p><em>waitlist available</em></p>
						{% else %}
							<p><em>class is full</em></p>			
						{% endif %}
					{% else %}
						<p><em>registration is open</em></p>
					{% endif %}
				{% endif %}

				</dd>

			{% endif %}

		{% endfor %}

	</dl>
	<div class="clear"></div>
	
	

	<h2 id="past" style="padding-top: 3em;">Past classes</h2>

	<dl class="date-listing">

		{% for event in event_list %}

			{% if event.has_passed and event.status == "PUBLISHED" %}

				{% ifchanged %}
					<dt>
						{{ event.date|date:"l" }}<br />
						<strong>{{ event.date|date:"j" }}</strong> {{ event.date|date:"F" }}
						{% if forloop.first %}
							{{ event.date|date:"Y" }}
						{% endif %}
					</dt>
				{% endifchanged %}
				<dd>
				<h3>
					<!--<b class="event">Event:</b>-->
					<a href="/classes/{{ event.slug }}">{{ event.title }} <span class="meta">({{ event.date|date:"P" }})</span></a>
				</h3>

				{{ event.summary|safe }}

				<p>Instructor: {% for bio in event.teacher_bios.all %}{% if not forloop.first %}, {% endif %}{{ bio.name }}{% endfor %}</p>

				</dd>

			{% endif %}

		{% endfor %}

	</dl>


	
{% endblock %}